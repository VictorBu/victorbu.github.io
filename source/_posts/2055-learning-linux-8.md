---
title: Linux 学习 (八) Shell
date: 2019-03-26 14:00:00
updated: 2019-03-26 14:00:00
categories: [IT]
tags: [Linux]
---

> [Linux达人养成计划 I](https://www.imooc.com/learn/175) 学习笔记



Shell 是什么：

+ Shell 是一个命令解释器
+ Shell 还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强

Shell 的分类：

+ Bourne Shell：主要包括 sh, ksh, Bash(Linux 标准 Shell，与 sh 兼容), psh, zsh
+ C Shell：主要包括 csh, tcsh

注：系统支持的Shell类型可以在 /etc/shells 文件查询


# 脚本执行方式

## echo [选项] [输出内容]
+ -e：支持反斜线控制的字符转换

控制字符 | 作用
---|---
\a | 输出警告音
\b | 退格键
\n | 换行符
\r | 回车键
\t | 制表符
\v | 垂直制表符
\0nnn | 按照八进制ASCII码表输出字符，其中0是数字零，nnn是三位八进制数
\xhh | 按照十六进制ASCII码表输出字符，其中hh是两位十六进制数

echo -e "\e[1;颜色代号 输出内容 \e[0m"
+ 30m 黑色
+ 31m 红色
+ 32m 绿色
+ 33m 黄色
+ 34m 蓝色
+ 35m 洋红
+ 36m 青色
+ 37m 白色

# 脚本

+ \#!/bin/bash ：脚本第一句，不能省略

脚本执行：
+ 赋予执行权限，直接运行
    + chmod 755 hello.sh
    + ./hello.sh
+ 通过 Bash 调用执行脚本
    + bash hello.sh

# Bash 的基本功能

## 命令的别名与快捷键

### alias ：查看系统中所有的命令别名

### alias 别名= '原命令' ：设定命令别名(临时生效)

### vi ~/.bashrc ：写入变量配置文件(永久生效，需重新登陆或者执行 source ~/.bashrc 命令)

### unalias ：删除别名(临时生效)

命令生效顺序：
+ 第一顺位执行用绝对路径或者相对路径执行的命令
+ 第二顺位执行别名
+ 第三顺位执行 Bash 的内部命令
+ 第四顺位执行按照 $PATH 环境变量定义的目录查找顺序找到的第一个命令

常用快捷键：
+ ctrl+c ：强制终止当前命令
+ ctrl+l ：清屏，等于 clear 命令
+ ctrl+a ：光标移动到命令行首
+ ctrl+e ：光标移动到命令行尾
+ ctrl+u ：从光标所在位置删除到行首
+ ctrl+z ：把命令放入后台
+ ctrl+r ：在历史命令中搜索

## 历史命令

### history [选项] [历史命令保存文件]
+ -c：清空历史命令
+ -w：把缓存中的历史命令写入历史命令保存文件 ~/.bash_history

历史命令默认会保存1000条，可以在环境变量配置文件 /etc/profile 中进行修改

历史命令的调用：
+ 使用上、下箭头调用以前的历史命令
+ 使用 "!n" 重复执行第 n 条历史命令
+ 使用 "!!"" 重复执行上一条命令
+ 使用 "!字符串" 重复执行最后一条以该字符串开通的命令

在 Bash 中，按 "Tab" 键就会自动进行补全

## 输出重定向

标准输入输出：

设备 | 设备文件名 | 文件描述符 | 类型
---|--- | --- | ---
键盘 | /dev/stdin | 0 | 标准输入
显示器 | /dev/sdtout | 1 | 标准输出
显示器 | /dev/sdterr | 2 |标准错误输出

输出重定向：

类型 | 符号 | 作用
---|---|--
标准输出重定向 | 命令 > 文件 | 以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中
- | 命令 >> 文件 | 以追加的方式，把命令的正确输出输出到指定的文件或设备当中
标准错误输出重定向 | 错误命令 2> 文件 | 以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中
- | 错误命令 2>> 文件 | 以追加的方式，把命令的错误输出输出到指定的文件或设备当中
正确输出和错误输出同时保存 | 命令 > 文件 2>&1 | 以覆盖的方式，把正确输出和错误的输出都保存到同一个文件中
- | 命令 >> 文件 2>&1 | 以追加的方式，把正确输出和错误的输出都保存到同一个文件中
- | 命令 &> 文件 | 以覆盖的方式，把正确输出和错误的输出都保存到同一个文件中
- | 命令 &>> 文件 | 以追加的方式，把正确输出和错误的输出都保存到同一个文件中
- | 命令 >> 文件1 2>> 文件2 | 把正确的输出追加到文件1中，把错误的输出追加到文件2中

注：把命令结果输出到 /dev/null 相当于丢弃输出结果


## 输入重定向

### wc [选项] [文件名]
+ -c ：统计字节数
+ -w ：统计单词数
+ -l ：统计行数
+ ctrl + d ：得到统计结果


符号 | 作用
---|---
命令 < 文件 | 把文件作为命令的输入
命令 << 标识符 ... 标识符 | 把标识符之间内容作为命令时的输入


## 管道符

多命令顺序执行：

多命令执行符 | 格式 | 作用
---|---|--
; | 命令1 ; 命令2 | 多个命令顺序执行，命令之间没有任何逻辑关系
&& | 命令1 && 命令2 | 当命令1正确执行，则命令2才会执行
\|\| | 命令1 \|\| 命令2 | 当命令1执行不正确，则命令2才会执行

### 命令1 | 命令2 ：命令1的正确输出作为命令2的操作对象

## 通配符


通配符 | 作用
---|---
? | 匹配一个任意字符
* | 匹配0个或任意多个任意字符，也就是可以匹配任何容
[] | 匹配中括号中任意一个字符
[-] | 匹配中括号中任意一个字符，-代表一个范围
[^] | 匹配不是中括号内的一个字符

其他特殊符号：

符号 | 作用
---|---
'' | 在单引号中所有的特殊符号都没有特殊含义
"" | 在双引号中特殊符号都没有特殊含义，但是"$", "`", "\"例外
`` | 反引号括起来的内容是系统命令，在 Bash 中会先执行它。和$()作用一样，不过推荐使用$()，因为反引号非常容易看错
$() | 和反引号作用一样，用来引用系统命令
# | #开头的行代表注释
$ | 用来调用变量的值
\ | 转义符，跟在\之后的特殊符号将失去特殊含义，变为普通字符

